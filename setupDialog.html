<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Setup</title>
    <link rel="stylesheet" href="css/photon.css">
  </head>
  <body>
        <div class="window">
            <header class="toolbar toolbar-header">
                <h1 class="title">Setup</h1>
            </header>
            <div class="tab-group">
                <div class="tab-item active" target="for-redcap" mode="REDCap">
                    <span class="icon"></span>
                    REDCap
                </div>
                <div class="tab-item"  target="for-filesystem" mode="filesystem">
                    <span class="icon"></span>
                    Filesystem
                </div>
                <div class="tab-item"  target="for-options">
                    <span class="icon"></span>
                    Options
                </div>
            </div>
            <div class="window-content">
                <div class="padded-more" style="width: 100%;">
                    <div class="mytabs" id="for-redcap" mode="REDCap">
                        <p>Connect to REDCap to be able to export data dictionaries and data spreadsheets in NDA format.</p>
                        <form>
                            <div class="form-group">
                            <label>REDCap Access Token</label>
                            <button class="btn btn-form btn-default pull-right" id="setup-dialog-update">Update</button>                                
                            <input type="text" class="form-control" id="redcap-access-token" placeholder="REDCap Access Token">
                            </div>
                            <div class="form-group">
                                <label>Events (use Update to populate)</label>
                                <select class="form-control" id="setup-events-list"></select>
                            </div>
                            <div class="form-group">
                                <label>REDCap API (default is ABCD)</label>
                                <input type="text" class="form-control" id="redcap-api-url" placeholder="https://abcd-rc.ucsd.edu/redcap/api/">
                            </div>
                            <div class="form-group">
                                <label title='[{"gender": "F", "pGUID": "NDAR_INVXXXXXXXX", "dob": "2007-07-15" }]'>NDA Subject Identifier File</label><br/>
                                <button type="button" class="btn btn-form btn-primary form-control" id="nda-subject-json">Load File</br><span style="font-size: 9pt;" id="nda-subject-json-filename">no file selected</span></button><br/>
                                
                            </div>
                        </form>
                    </div>
                    <div class="mytabs" id="for-filesystem" mode="filesystem" style="display: none;">
                        <p>The filesystem database backend uses a single directory with CSV spreadsheets as an input source 
                        and does not require a database connection. For simplicity the assumption is that the data dictionaries 
                        can be derived trivially from the header column names of the data spreadsheets. Exporting such an instruments
                        data dictionary should be avoided as there are no variable descriptions. Export the data spreadsheets for upload to NDA.</p>
                        <form>
                            <div class="form-group">
                                <label title='Specify data directory with CSV files'>Specify local directory with CSV data files</label><br/>
                                <button type="button" class="btn btn-form btn-primary form-control" id="specify-datadir" style="line-height: 12pt;">Set Directory</br><span id="datadir-filename">no directory selected</span></button><br/>
                            </div>      
                            <div class="form-group">
                                <label title='[{"gender": "F", "pGUID": "NDAR_INVXXXXXXXX", "dob": "2007-07-15" }]'>NDA Subject Identifier File</label><br/>
                                <button type="button" class="btn btn-form btn-primary form-control" id="nda-subject-json2" style="line-height: 12pt;">Load File</br><span id="nda-subject-json-filename2">no file selected</span></button><br/>
                            </div>
                        </form>
                    </div>
                    <div class="mytabs" id="for-options" style="display: none;">
                        <form>
                            <div class="form-group">
                                <label title='redcap,aliases'>Import alias file (merge with database)</label><br/>
                                <button type="button" class="btn btn-form btn-default form-control" id="nda-aliases" style="line-height: 12pt;">Load File</br><span id="nda-aliases-filename">no file selected</span></button><br/>
                            </div>
                            <div class="checkbox">
                                <label for="setup-dialog-remove-text" class="form-check-label">
                                <input type="checkbox" class="form-check-input" id="setup-dialog-remove-text"> On export remove all non-numeric text</label>
                            </div>
                        </form>
                        <hr>
                        <p>In order to export data you need to specify a control file that contains the participants that you want to download. 
                           This file contains the events, date of birth and sex at birth information.</p>
                        <form>
                            <div class="form-group">
                                <label title="pGUID field for this project">Participant identifier field for REDCap</label><br/>
                                <input type="text" class="form-control" id="pguid-field" placeholder="id_redcap">
                            </div>
                            <div class="form-group">
                                <label title="Date of birth field for this project">Date of birth field</label><br/>
                                <input type="text" class="form-control" id="dob-field" placeholder="dob">
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-form btn-defaulf form-control" id="create-participant-file" style="line-height: 12pt;">Create control file</button>
                            </div>
                        </form>
                    </div>
                    <hr>
                    <div class="form-actions">
                        <button class="btn btn-form btn-default" id="setup-dialog-cancel">Cancel</button>
                        <button class="btn btn-form btn-primary" id="setup-dialog-ok">Save</button>
                    </div>
                </div>
            </div>
        </div>
         <script>
                // You can also require other files to run in this process
                require('./setupDialog.js')
        </script>
  </body>
</html>